<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>【python开发】— Django（一） | Debug the World</title><meta name="author" content="Joe Xu"><meta name="copyright" content="Joe Xu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="【python开发】— Django（一）一、web框架1. web框架的本质众所周知，对于所有的Web应用，本质上其实就是一个socket服务端，用户的浏览器其实就是一个socket客户端。 想要自定义一个web框架，需要实现以下三个功能：  socket服务端（实现绑定、监听、连接等）。 路由系统：根据url找到对应的函数并执行，即根据不同的url返回不同的内容。 模板引擎渲染：用HTML充当">
<meta property="og:type" content="article">
<meta property="og:title" content="【python开发】— Django（一）">
<meta property="og:url" content="http://example.com/2020/04/17/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20Django%EF%BC%88%E4%B8%80%EF%BC%89/index.html">
<meta property="og:site_name" content="Debug the World">
<meta property="og:description" content="【python开发】— Django（一）一、web框架1. web框架的本质众所周知，对于所有的Web应用，本质上其实就是一个socket服务端，用户的浏览器其实就是一个socket客户端。 想要自定义一个web框架，需要实现以下三个功能：  socket服务端（实现绑定、监听、连接等）。 路由系统：根据url找到对应的函数并执行，即根据不同的url返回不同的内容。 模板引擎渲染：用HTML充当">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/67886383?s=400&u=99fc4b7b2788d8823a12f2924f7942669b39b105&v=4">
<meta property="article:published_time" content="2020-04-17T09:29:39.000Z">
<meta property="article:modified_time" content="2023-04-02T04:17:00.698Z">
<meta property="article:author" content="Joe Xu">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://avatars.githubusercontent.com/u/67886383?s=400&u=99fc4b7b2788d8823a12f2924f7942669b39b105&v=4"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2020/04/17/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20Django%EF%BC%88%E4%B8%80%EF%BC%89/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":288},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '【python开发】— Django（一）',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-02 12:17:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://avatars.githubusercontent.com/u/67886383?s=400&amp;u=99fc4b7b2788d8823a12f2924f7942669b39b105&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">11</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Debug the World"><span class="site-name">Debug the World</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">【python开发】— Django（一）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-04-17T09:29:39.000Z" title="Created 2020-04-17 17:29:39">2020-04-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-04-02T04:17:00.698Z" title="Updated 2023-04-02 12:17:00">2023-04-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/python/">python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="【python开发】— Django（一）"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="【python开发】—-Django（一）"><a href="#【python开发】—-Django（一）" class="headerlink" title="【python开发】— Django（一）"></a>【python开发】— Django（一）</h1><h1 id="一、web框架"><a href="#一、web框架" class="headerlink" title="一、web框架"></a>一、web框架</h1><h3 id="1-web框架的本质"><a href="#1-web框架的本质" class="headerlink" title="1. web框架的本质"></a>1. web框架的本质</h3><p>众所周知，对于所有的Web应用，本质上其实就是一个socket服务端，用户的浏览器其实就是一个socket客户端。</p>
<p>想要<strong>自定义一个web框架</strong>，需要实现以下三个功能：</p>
<ol>
<li>socket服务端（实现绑定、监听、连接等）。</li>
<li>路由系统：根据url找到对应的函数并执行，即根据不同的url返回不同的内容。</li>
<li>模板引擎渲染：用HTML充当模板，可以连接数据库实现动态模板，该过程本质是将字符串返回给用户。</li>
</ol>
<p>具体可参考这篇：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/wupeiqi/articles/5237672.html">https://www.cnblogs.com/wupeiqi/articles/5237672.html</a></p>
<h3 id="2-web框架基础"><a href="#2-web框架基础" class="headerlink" title="2. web框架基础"></a>2. web框架基础</h3><ul>
<li>通常情况下我们都是使用现有的框架，在现有框架的基础上编写web业务。现有的框架比如：Django、Tornado、Flask、web.py 等。</li>
<li>WSGI（Web Server Gateway Interface）是一种规范，它定义了使用python编写的web app(web应用)与web server(web服务器)之间接口格式，实现web app与web server间的解耦。</li>
<li>python标准库提供的独立WSGI服务器称为wsgiref。在Python中的导入：from wsgiref.simple_server import make_server</li>
</ul>
<h3 id="3-MVC和MTV模式"><a href="#3-MVC和MTV模式" class="headerlink" title="3. MVC和MTV模式"></a>3. MVC和MTV模式</h3><p><strong>MVC</strong>是Web服务器开发领域里著名的模式，所谓MVC就是把Web应用分为模型（M），控制器（C）和视图（V）三层，他们之间以一种插件式的、松耦合的方式连接在一起。</p>
<ul>
<li>M：Model 负责业务对象与数据库的映射(ORM)</li>
<li>V：View 负责与用户的交互(页面)</li>
<li>C：Controller 接受用户的输入调用模型和视图完成用户的请求<br><img src="/2020/04/17/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20Django%EF%BC%88%E4%B8%80%EF%BC%89/20200312205900532.png" alt="在这里插入图片描述"></li>
</ul>
<p>Django在MVC的基础上搞了个自己的MTV模式，本质上与MVC模式没有什么差别，也是各组件之间为了保持松耦合关系，只是定义上有些许不同，Django的MTV分别代表：</p>
<ul>
<li>Model(模型)：负责业务对象与数据库的对象(ORM)</li>
<li>Template(模版)：负责如何把页面展示给用户</li>
<li>View(视图)：负责业务逻辑，并在适当的时候调用Model和Template</li>
</ul>
<p>此外，Django还有一个url分发器，它的作用是将一个个URL的页面请求分发给不同的view处理，view再调用相应的Model和Template。<br><img src="/2020/04/17/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20Django%EF%BC%88%E4%B8%80%EF%BC%89/20200312210445653.png" alt="在这里插入图片描述"><br>&#x3D;&#x3D;<strong>总结：</strong>&#x3D;&#x3D;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">models(数据库，模型);  views(HTML模板);      controllers(业务逻辑处理)  —&gt; MVC</span><br><span class="line">models(数据库，模型);  templates(HTML模板);  views(业务逻辑处理)        —&gt; MTV</span><br></pre></td></tr></table></figure>

<h1 id="二、Django"><a href="#二、Django" class="headerlink" title="二、Django"></a>二、Django</h1><p>Django相较与其他WEB框架其优势为：大而全，框架本身集成了ORM、模型绑定、模板引擎、缓存、Session等诸多功能。</p>
<h3 id="1-基本配置"><a href="#1-基本配置" class="headerlink" title="1. 基本配置"></a>1. 基本配置</h3><h4 id="（1）创建django程序"><a href="#（1）创建django程序" class="headerlink" title="（1）创建django程序"></a>（1）创建django程序</h4><ul>
<li>终端命令：django-admin startproject sitename</li>
<li>IDE创建Django程序时，本质上都是自动执行上述命令。</li>
</ul>
<p><strong>其他常用命令：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>  <span class="comment"># 启动项目，指定端口</span></span><br><span class="line">python manage.py startapp appname   <span class="comment"># 创建app</span></span><br><span class="line">python manage.py makemigrations     <span class="comment"># 生成同步数据库的脚本</span></span><br><span class="line">python manage.py migrate            <span class="comment">#  同步数据库</span></span><br><span class="line">python manage.py createsuperuser    <span class="comment"># 创建超级管理员</span></span><br></pre></td></tr></table></figure>
<p> <strong>注意</strong>：在开发过程中，数据库同步误操作之后，难免会遇到后面不能同步成功的情况，解决这个问题的一个简单粗暴方法是把migrations目录下的脚本（除__init__.py之外）全部删掉，再把数据库删掉之后创建一个新的数据库，数据库同步操作再重新做一遍。   </p>
<h4 id="（2）程序目录"><a href="#（2）程序目录" class="headerlink" title="（2）程序目录"></a>（2）程序目录</h4><p><img src="/2020/04/17/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20Django%EF%BC%88%E4%B8%80%EF%BC%89/20200312211342801.jpg" alt="在这里插入图片描述"></p>
<h4 id="（3）配置文件"><a href="#（3）配置文件" class="headerlink" title="（3）配置文件"></a>（3）配置文件</h4><p><strong>数据库：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;NAME&#x27;</span>:<span class="string">&#x27;dbname&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;xxx&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;PORT&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 由于Django内部连接MySQL时使用的是MySQLdb模块，而python3中还无此模块，所以需要使用pymysql来代替  </span></span><br><span class="line"><span class="comment"># 如下设置放置的与project同名的配置的 __init__.py文件中</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()　</span><br></pre></td></tr></table></figure>
<p><strong>模版：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATE_DIRS = (</span><br><span class="line">        os.path.join(BASE_DIR,<span class="string">&#x27;templates&#x27;</span>),</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p><strong>静态文件：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">STATICFILES_DIRS = (</span><br><span class="line">        os.path.join(BASE_DIR,<span class="string">&#x27;static&#x27;</span>),</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<h3 id="2-路由系统"><a href="#2-路由系统" class="headerlink" title="2. 路由系统"></a>2. 路由系统</h3><p>URL配置(URLconf)就像Django 所支撑网站的目录。它的本质是URL模式以及要为该URL模式调用的视图函数之间的映射表；你就是以这种方式告诉Django，对于这个URL调用这段代码，对于那个URL调用那段代码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    url(正则表达式, views视图函数，参数，别名),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>参数说明：</p>
<ul>
<li>一个正则表达式字符串。</li>
<li>一个可调用对象，通常为一个视图函数或一个指定视图函数路径的字符串。</li>
<li>可选的要传递给视图函数的默认参数（字典形式）。</li>
<li>一个可选的name参数。</li>
</ul>
<p><strong>（1）单一路由对应</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r&#x27;^index$&#x27;</span>, views.index),</span><br></pre></td></tr></table></figure>
<p><strong>（2）基于正则的路由</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r&#x27;^index/(\d*)&#x27;</span>, views.index),</span><br><span class="line">url(<span class="string">r&#x27;^manage/(?P&lt;name&gt;\w*)/(?P&lt;id&gt;\d*)&#x27;</span>, views.manage),</span><br></pre></td></tr></table></figure>
<p><strong>（3）添加额外的参数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r&#x27;^manage/(?P&lt;name&gt;\w*)&#x27;</span>, views.manage,&#123;<span class="string">&#x27;id&#x27;</span>:<span class="number">333</span>&#125;),</span><br></pre></td></tr></table></figure>
<p><strong>（4）为路由映射设置名称</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r&#x27;^home&#x27;</span>, views.home, name=<span class="string">&#x27;h1&#x27;</span>),</span><br><span class="line">url(<span class="string">r&#x27;^index/(\d*)&#x27;</span>, views.index, name=<span class="string">&#x27;h2&#x27;</span>),</span><br></pre></td></tr></table></figure>
<p>设置名称之后，可以在不同的地方调用，如：</p>
<ul>
<li>模板中使用生成URL     <code>&#123;% url 'h2' 2012 %&#125;</code></li>
<li>函数中使用生成URL     reverse(‘h2’, args&#x3D;(2012,))       路径:django.urls.reverse</li>
<li>Model中使用获取URL  自定义get_absolute_url() 方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NewType</span>(models.Model):</span><br><span class="line">    caption = models.CharField(max_length=<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_absolute_url</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        为每个对象生成一个URL</span></span><br><span class="line"><span class="string">        应用：在对象列表中生成查看详细的URL，使用此方法即可！！！</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># return &#x27;/%s/%s&#x27; % (self._meta.db_table, self.id)</span></span><br><span class="line">        <span class="comment"># 或</span></span><br><span class="line">        <span class="keyword">from</span> django.urls <span class="keyword">import</span> reverse</span><br><span class="line">        <span class="keyword">return</span> reverse(<span class="string">&#x27;NewType.Detail&#x27;</span>, kwargs=&#123;<span class="string">&#x27;nid&#x27;</span>: self.<span class="built_in">id</span>&#125;)</span><br><span class="line"><span class="comment"># 获取请求匹配成功的URL信息：request.resolver_match</span></span><br></pre></td></tr></table></figure>
<p><strong>（5）根据app对路由规则进行分类</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r&#x27;^web/&#x27;</span>,include(<span class="string">&#x27;web.urls&#x27;</span>)),</span><br></pre></td></tr></table></figure>
<p><strong>（6）命名空间</strong><br>a. project.urls.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url,include</span><br><span class="line"> </span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r&#x27;^a/&#x27;</span>, include(<span class="string">&#x27;app01.urls&#x27;</span>, namespace=<span class="string">&#x27;author-polls&#x27;</span>)),</span><br><span class="line">    url(<span class="string">r&#x27;^b/&#x27;</span>, include(<span class="string">&#x27;app01.urls&#x27;</span>, namespace=<span class="string">&#x27;publisher-polls&#x27;</span>)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>b. app01.urls.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url</span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> views</span><br><span class="line"> </span><br><span class="line">app_name = <span class="string">&#x27;app01&#x27;</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r&#x27;^(?P&lt;pk&gt;\d+)/$&#x27;</span>, views.detail, name=<span class="string">&#x27;detail&#x27;</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>c. app01.views.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">detail</span>(<span class="params">request, pk</span>):</span><br><span class="line">    <span class="built_in">print</span>(request.resolver_match)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(pk)</span><br></pre></td></tr></table></figure>
<p>以上定义带命名空间的url之后，使用name生成URL时候，应该如下：</p>
<ul>
<li>v &#x3D; reverse(‘app01:detail’, kwargs&#x3D;{‘pk’:11})</li>
<li><code>&#123;% url 'app01:detail' pk=12 pp=99 %&#125;</code></li>
</ul>
<p>django中的路由系统和其他语言的框架有所不同，在django中每一个请求的url都要有一条路由映射，这样才能将请求交给对一个的view中的函数去处理。其他大部分的Web框架则是对一类的url请求做一条路由映射，从而是路由系统变得简洁。</p>
<p>&#x3D;&#x3D;<strong>路由总结</strong>&#x3D;&#x3D;</p>
<ul>
<li><p><strong>1. 静态路由</strong>：url(r’^edit&#x2F;‘,views.edit),  这种情况url后面想接拿到的值<br><a target="_blank" rel="noopener" href="http://127.0.0.1:8000/edit/?nid=alex">http://127.0.0.1:8000/edit/?nid=alex</a> , 而前端页面需要这样写：<br>url里的问号？就是以get方式传参的标志。</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;&#123;&#123; i &#125;&#125; | &lt;a href=<span class="string">&quot;/edit/?nid=&#123;&#123; i &#125;&#125;/&quot;</span>&gt;编辑&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>2. 动态路由</strong>：通过正则表达式去匹配，并在函数里添加参数去接收。 url(r’^edit&#x2F;(\w+)&#x2F;‘,views.edit), 这种情况url后面想接拿到的值 <a target="_blank" rel="noopener" href="http://127.0.0.1:8000/edit/alex/%EF%BC%8C">http://127.0.0.1:8000/edit/alex/，</a> 而前端页面需要这样写即可：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;&#123;&#123; i &#125;&#125; | &lt;a href=<span class="string">&quot;/edit/&#123;&#123; i &#125;&#125;/&quot;</span>&gt;编辑&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a1对应路由里(\w+)匹配到的值</span></span><br><span class="line">url(<span class="string">r&#x27;^edit/(\w+)/&#x27;</span>,views.edit),</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">edit</span>(<span class="params">request,a1</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;...&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># a1，a2对应路由里(\w+)/(\w+)/匹配到的值</span></span><br><span class="line">url(<span class="string">r&#x27;^edit/(\w+)/(\w+)/&#x27;</span>,views.edit),</span><br><span class="line">url(<span class="string">r&#x27;^edit/(?P&lt;a2&gt;\w+)/(?P&lt;a1&gt;\w+)/&#x27;</span>,views.edit),</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">edit</span>(<span class="params">request,a1,a2</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1,a2)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;...&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>3. 伪静态</strong>：url(r’^edit&#x2F;(\w+).html$’,views.edit),</p>
</li>
<li><p><strong>4. 路由分发</strong>：在urls.py下写 url(r’^app01&#x2F;‘,include(‘app01.urls’)), 在app01.urls.py下写url(r’^index.html$’,views.index)，例如下面的url：127.0.0.1:8000&#x2F;app01&#x2F;index.html, 就会根据路由分发，先找到app01，再找到其下的index.html。</p>
</li>
<li><p><strong>5. url别名</strong>：根据自定义的别名反向生成url url(r’^edit&#x2F;(\w+).html$’,views.edit,name&#x3D;’n1’), 别名就是n1。</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- 在Python代码中：</span><br><span class="line">        <span class="keyword">from</span> django.urls <span class="keyword">import</span> reverse</span><br><span class="line">        v = reverse(<span class="string">&#x27;n1&#x27;</span>,kwargs=&#123;<span class="string">&#x27;a1&#x27;</span>:<span class="number">1111</span>&#125;)</span><br><span class="line">        <span class="built_in">print</span>(v)</span><br><span class="line">       </span><br><span class="line">- 在前端模板： </span><br><span class="line">     &lt;li&gt;&#123;&#123; i &#125;&#125; | &lt;a href=<span class="string">&quot;&#123;% url &quot;</span>n1<span class="string">&quot; i %&#125;&quot;</span>&gt;编辑&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-视图函数"><a href="#3-视图函数" class="headerlink" title="3. 视图函数"></a>3. 视图函数</h3><p>http请求中产生两个核心对象：</p>
<ul>
<li>http请求：HttpRequest对象</li>
<li>http响应：HttpResponse对象</li>
</ul>
<p>所在位置：django.http，之前我们用到的参数request就是HttpRequest    检测方法：isinstance(request,HttpRequest)</p>
<p><strong>（1）HttpRequest对象的属性和方法：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">path：       请求页面的全路径，不包括域名</span><br><span class="line"></span><br><span class="line">method：     请求中使用的HTTP方法的字符串表示。全大写表示。例如</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span>  req.method==<span class="string">&quot;GET&quot;</span>:</span><br><span class="line">                         do_something()</span><br><span class="line">                    elseif req.method==<span class="string">&quot;POST&quot;</span>:</span><br><span class="line">                         do_something_else()</span><br><span class="line"></span><br><span class="line">GET:         包含所有HTTP GET参数的类字典对象</span><br><span class="line"></span><br><span class="line">POST：       包含所有HTTP POST参数的类字典对象</span><br><span class="line"></span><br><span class="line">             服务器收到空的POST请求的情况也是可能发生的，也就是说，表单form通过</span><br><span class="line">             HTTP POST方法提交请求，但是表单中可能没有数据，因此不能使用</span><br><span class="line">             <span class="keyword">if</span> req.POST来判断是否使用了HTTP POST 方法；应该使用  <span class="keyword">if</span> req.method==<span class="string">&quot;POST&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">COOKIES:     包含所有cookies的标准Python字典对象；keys和values都是字符串。</span><br><span class="line"></span><br><span class="line">FILES：      包含所有上传文件的类字典对象；FILES中的每一个Key都是&lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;&quot;</span> /&gt;标签中                     name属性的值，FILES中的每一个value同时也是一个标准的python字典对象，包含下面三个Keys：</span><br><span class="line"></span><br><span class="line">             filename：      上传文件名，用字符串表示</span><br><span class="line">             content_type:   上传文件的Content <span class="type">Type</span></span><br><span class="line">             content：       上传文件的原始内容</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user：       是一个django.contrib.auth.models.User对象，代表当前登陆的用户。如果访问用户当前没有登陆，user将被初始化为django.contrib.auth.models.AnonymousUser的实例。你可以通过user的is_authenticated()方法来辨别用户是否登陆：<span class="keyword">if</span> req.user.is_authenticated();只有激活Django中的AuthenticationMiddleware时该属性才可用</span><br><span class="line"></span><br><span class="line">session：    唯一可读写的属性，代表当前会话的字典对象；自己有激活Django中的session支持时该属性才可用。</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法</span></span><br><span class="line">get_full_path(),   比如：http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/index33/?name=<span class="number">123</span> ,req.get_full_path()得到的结果就是/index33/?name=<span class="number">123</span>  req.path:/index33</span><br><span class="line"></span><br><span class="line"><span class="comment">#注意一个常用方法：</span></span><br><span class="line">request.POST.getlist(<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>（2）HttpResponse对象：</strong><br>对于HttpRequest对象来说，是由django自动创建的，但是，HttpResponse对象就必须我们自己创建。每个view请求处理方法必须返回一个HttpResponse对象。HttpResponse类在django.http.HttpResponse</p>
<p>在HttpResponse对象上扩展的常用方法：</p>
<ul>
<li>页面渲染：     render()（推荐）        render_to_response(),</li>
<li>页面跳转：         redirect(“路径”)</li>
<li>locals()：       可以直接将函数中所有的变量传给模板。</li>
</ul>
<h3 id="4-模板"><a href="#4-模板" class="headerlink" title="4. 模板"></a>4. 模板</h3><p><strong>模版的组成：</strong><br>组成：HTML代码＋逻辑控制代码。</p>
<p><strong>逻辑控制代码的组成：</strong><br><strong>（1）变量</strong>（使用双大括号来引用变量）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法格式：       &#123;&#123;var_name&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>— 深度变量的查找（万能的句点号）：<br>模板系统能够非常简洁地处理更加复杂的数据结构，例如list、dictionary和自定义的对象。在 Django 模板中遍历复杂数据结构的关键是句点字符 (.)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先，句点可用于访问列表索引，例如：</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> django.template <span class="keyword">import</span> Template, Context</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = Template(<span class="string">&#x27;Item 2 is &#123;&#123; items.2 &#125;&#125;.&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = Context(&#123;<span class="string">&#x27;items&#x27;</span>: [<span class="string">&#x27;apples&#x27;</span>, <span class="string">&#x27;bananas&#x27;</span>, <span class="string">&#x27;carrots&#x27;</span>]&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.render(c)</span><br><span class="line"><span class="string">&#x27;Item 2 is carrots.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#假设你要向模板传递一个 Python 字典。 要通过字典键访问该字典的值，可使用一个句点：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> django.template <span class="keyword">import</span> Template, Context</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>person = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Sally&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="string">&#x27;43&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = Template(<span class="string">&#x27;&#123;&#123; person.name &#125;&#125; is &#123;&#123; person.age &#125;&#125; years old.&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = Context(&#123;<span class="string">&#x27;person&#x27;</span>: person&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.render(c)</span><br><span class="line"><span class="string">&#x27;Sally is 43 years old.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#同样，也可以通过句点来访问对象的属性。 比方说， Python 的 datetime.date 对象有</span></span><br><span class="line"><span class="comment">#year 、 month 和 day 几个属性，你同样可以在模板中使用句点来访问这些属性：</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> django.template <span class="keyword">import</span> Template, Context</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = datetime.date(<span class="number">1993</span>, <span class="number">5</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.year</span><br><span class="line"><span class="number">1993</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.month</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.day</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = Template(<span class="string">&#x27;The month is &#123;&#123; date.month &#125;&#125; and the year is &#123;&#123; date.year &#125;&#125;.&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = Context(&#123;<span class="string">&#x27;date&#x27;</span>: d&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.render(c)</span><br><span class="line"><span class="string">&#x27;The month is 5 and the year is 1993.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这个例子使用了一个自定义的类，演示了通过实例变量加一点(dots)来访问它的属性，这个方法适用于任意的对象。</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> django.template <span class="keyword">import</span> Template, Context</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, first_name, last_name</span>):</span><br><span class="line"><span class="meta">... </span>        self.first_name, self.last_name = first_name, last_name</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = Template(<span class="string">&#x27;Hello, &#123;&#123; person.first_name &#125;&#125; &#123;&#123; person.last_name &#125;&#125;.&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = Context(&#123;<span class="string">&#x27;person&#x27;</span>: Person(<span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;Smith&#x27;</span>)&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.render(c)</span><br><span class="line"><span class="string">&#x27;Hello, John Smith.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 点语法也可以用来引用对象的方法。 例如，每个 Python 字符串都有 upper() 和 isdigit()</span></span><br><span class="line"><span class="comment"># 方法，你在模板中可以使用同样的句点语法来调用它们：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> django.template <span class="keyword">import</span> Template, Context</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = Template(<span class="string">&#x27;&#123;&#123; var &#125;&#125; -- &#123;&#123; var.upper &#125;&#125; -- &#123;&#123; var.isdigit &#125;&#125;&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.render(Context(&#123;<span class="string">&#x27;var&#x27;</span>: <span class="string">&#x27;hello&#x27;</span>&#125;))</span><br><span class="line"><span class="string">&#x27;hello -- HELLO -- False&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.render(Context(&#123;<span class="string">&#x27;var&#x27;</span>: <span class="string">&#x27;123&#x27;</span>&#125;))</span><br><span class="line"><span class="string">&#x27;123 -- 123 -- True&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意这里调用方法时并没有使用圆括号 而且也无法给该方法传递参数；你只能调用不需参数的方法。</span></span><br></pre></td></tr></table></figure>
<p>— 变量的过滤器(filter)的使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法格式：      &#123;&#123;obj|<span class="built_in">filter</span>:param&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment"># 1  add          ：   给变量加上相应的值</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   <span class="comment"># 2  addslashes   :    给变量中的引号前加上斜线</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   <span class="comment"># 3  capfirst     :    首字母大写</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   <span class="comment"># 4  cut          ：   从字符串中移除指定的字符</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   <span class="comment"># 5  date         ：   格式化日期字符串</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   <span class="comment"># 6  default      ：   如果值是False,就替换成设置的默认值，否则就是用本来的值</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   <span class="comment"># 7  default_if_none:  如果值是None，就替换成设置的默认值，否则就使用本来的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#实例:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#value1=&quot;aBcDe&quot;</span></span><br><span class="line">&#123;&#123; value1|upper &#125;&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#value2=5</span></span><br><span class="line">&#123;&#123; value2|add:<span class="number">3</span> &#125;&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#value3=&#x27;he  llo wo r ld&#x27;</span></span><br><span class="line">&#123;&#123; value3|cut:<span class="string">&#x27; &#x27;</span> &#125;&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#import datetime</span></span><br><span class="line"><span class="comment">#value4=datetime.datetime.now()</span></span><br><span class="line">&#123;&#123; value4|date:<span class="string">&#x27;Y-m-d&#x27;</span> &#125;&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#value5=[]</span></span><br><span class="line">&#123;&#123; value5|default:<span class="string">&#x27;空的&#x27;</span> &#125;&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#value6=&#x27;&lt;a href=&quot;#&quot;&gt;跳转&lt;/a&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line">&#123;&#123; value6 &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消代码自动转义，表示这段代码安全，可以直接以标签语言显示</span></span><br><span class="line"><span class="comment"># 如果不关掉自动转义，则会显示原字符串</span></span><br><span class="line">&#123;% autoescape off %&#125;</span><br><span class="line">  &#123;&#123; value6 &#125;&#125;</span><br><span class="line">&#123;% endautoescape %&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; value6|safe &#125;&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&#123;&#123; value6|striptags &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#value7=&#x27;1234&#x27;</span></span><br><span class="line">&#123;&#123; value7|filesizeformat &#125;&#125;&lt;br&gt;</span><br><span class="line">&#123;&#123; value7|first &#125;&#125;&lt;br&gt;</span><br><span class="line">&#123;&#123; value7|length &#125;&#125;&lt;br&gt;</span><br><span class="line">&#123;&#123; value7|<span class="built_in">slice</span>:<span class="string">&quot;:-1&quot;</span> &#125;&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#value8=&#x27;http://www.baidu.com/?a=1&amp;b=3&#x27;</span></span><br><span class="line">&#123;&#123; value8|urlencode &#125;&#125;&lt;br&gt;</span><br><span class="line">    value9=<span class="string">&#x27;hello I am yuan&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong>（2）标签(tag)的使用</strong>（使用大括号和百分比的组合来表示使用tag）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tags %&#125;</span><br></pre></td></tr></table></figure>
<p>— <code>&#123;% if %&#125;` 的使用： 
`&#123;% if %&#125;`标签计算一个变量值，如果是“true”，即它存在、不为空并且不是false的boolean值,系统则会显示`&#123;% if %&#125;`和`&#123;% endif %&#125;</code>间的所有内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> num &gt;= <span class="number">100</span> <span class="keyword">and</span> <span class="number">8</span> %&#125;</span><br><span class="line">    &#123;% <span class="keyword">if</span> num &gt; <span class="number">200</span> %&#125;</span><br><span class="line">        &lt;p&gt;num大于<span class="number">200</span>&lt;/p&gt;</span><br><span class="line">    &#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">        &lt;p&gt;num大于<span class="number">100</span>小于<span class="number">200</span>&lt;/p&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&#123;% <span class="keyword">elif</span> num &lt; <span class="number">100</span>%&#125;</span><br><span class="line">    &lt;p&gt;num小于<span class="number">100</span>&lt;/p&gt;</span><br><span class="line">&#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">    &lt;p&gt;num等于<span class="number">100</span>&lt;/p&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% <span class="keyword">if</span> %&#125; 标签接受<span class="keyword">and</span>，<span class="keyword">or</span>或者<span class="keyword">not</span>来测试多个变量值或者否定一个给定的变量</span><br><span class="line">&#123;% <span class="keyword">if</span> %&#125; 标签不允许同一标签里同时出现<span class="keyword">and</span>和<span class="keyword">or</span>，否则逻辑容易产生歧义，例如下面的标签是不合法的：</span><br><span class="line">&#123;% <span class="keyword">if</span> obj1 <span class="keyword">and</span> obj2 <span class="keyword">or</span> obj3 %&#125;  </span><br></pre></td></tr></table></figure>
<p>— <code>&#123;% for %&#125;`的使用：
`&#123;% for %&#125;`标签允许你按顺序遍历一个序列中的各个元素,每次循环模板系统都会渲染`&#123;% for %&#125;`和`&#123;% endfor %&#125;</code>之间的所有内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">&#123;% <span class="keyword">for</span> obj <span class="keyword">in</span> <span class="built_in">list</span> %&#125;</span><br><span class="line">    &lt;li&gt;&#123;&#123; obj.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#在标签里添加reversed来反序循环列表：</span></span><br><span class="line">    &#123;% <span class="keyword">for</span> obj <span class="keyword">in</span> <span class="built_in">list</span> <span class="built_in">reversed</span> %&#125;</span><br><span class="line">    ...</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;% for %&#125;标签可以嵌套：</span></span><br><span class="line">    &#123;% <span class="keyword">for</span> country <span class="keyword">in</span> countries %&#125;</span><br><span class="line">        &lt;h1&gt;&#123;&#123; country.name &#125;&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">         &#123;% <span class="keyword">for</span> city <span class="keyword">in</span> country.city_list %&#125;</span><br><span class="line">            &lt;li&gt;&#123;&#123; city &#125;&#125;&lt;/li&gt;</span><br><span class="line">         &#123;% endfor %&#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#系统不支持中断循环，系统也不支持continue语句，&#123;% for %&#125;标签内置了一个forloop模板变量，这个变量含有一些属性可以提供给你一些关于循环的信息</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>，forloop.counter表示循环的次数，它从<span class="number">1</span>开始计数，第一次循环设为<span class="number">1</span>:</span><br><span class="line">    &#123;% <span class="keyword">for</span> item <span class="keyword">in</span> todo_list %&#125;</span><br><span class="line">        &lt;p&gt;&#123;&#123; forloop.counter &#125;&#125;: &#123;&#123; item &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="number">2</span>，forloop.counter0 类似于forloop.counter，但它是从<span class="number">0</span>开始计数，第一次循环设为<span class="number">0</span></span><br><span class="line"><span class="number">3</span>，forloop.revcounter</span><br><span class="line"><span class="number">4</span>，forloop.revcounter0</span><br><span class="line"><span class="number">5</span>，forloop.first当第一次循环时值为<span class="literal">True</span>，在特别情况下很有用：</span><br><span class="line">    &#123;% <span class="keyword">for</span> <span class="built_in">object</span> <span class="keyword">in</span> objects %&#125;   </span><br><span class="line">         &#123;% <span class="keyword">if</span> forloop.first %&#125;&lt;li <span class="keyword">class</span>=<span class="string">&quot;first&quot;</span>&gt;&#123;% <span class="keyword">else</span> %&#125;&lt;li&gt;&#123;% endif %&#125;   </span><br><span class="line">         &#123;&#123; <span class="built_in">object</span> &#125;&#125;   </span><br><span class="line">        &lt;/li&gt;  </span><br><span class="line">    &#123;% endfor %&#125;  </span><br><span class="line">    </span><br><span class="line"><span class="comment"># 富有魔力的forloop变量只能在循环中得到，当模板解析器到达&#123;% endfor %&#125;时forloop就消失了</span></span><br><span class="line"><span class="comment"># 如果你的模板context已经包含一个叫forloop的变量，Django会用&#123;% for %&#125;标签替代它</span></span><br><span class="line"><span class="comment"># Django会在for标签的块中覆盖你定义的forloop变量的值</span></span><br><span class="line"><span class="comment"># 在其他非循环的地方，你的forloop变量仍然可用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;% empty %&#125;</span></span><br><span class="line">&#123;&#123;li &#125;&#125;</span><br><span class="line">      &#123;%  <span class="keyword">for</span> i <span class="keyword">in</span> li %&#125;</span><br><span class="line">          &lt;li&gt;&#123;&#123; forloop.counter0 &#125;&#125;----&#123;&#123; i &#125;&#125;&lt;/li&gt;</span><br><span class="line">      &#123;% empty %&#125;</span><br><span class="line">          &lt;li&gt;this <span class="keyword">is</span> empty!&lt;/li&gt;</span><br><span class="line">      &#123;% endfor %&#125;</span><br><span class="line"><span class="comment">#         [11, 22, 33, 44, 55]</span></span><br><span class="line"><span class="comment">#            0----11</span></span><br><span class="line"><span class="comment">#            1----22</span></span><br><span class="line"><span class="comment">#            2----33</span></span><br><span class="line"><span class="comment">#            3----44</span></span><br><span class="line"><span class="comment">#            4----55</span></span><br></pre></td></tr></table></figure>
<p>— <code>&#123;%csrf_token%&#125;</code>：csrf_token标签<br>用于生成csrf_token的标签，用于防治跨站攻击验证。注意如果你在view的index里用的是render_to_response方法，不会生效，其实，这里是会生成一个input标签，和其他表单标签一起提交给后台的。</p>
<p>— <code>&#123;% url %&#125;</code>:  引用路由配置的地址</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;&#123;% url &quot;</span>bieming<span class="string">&quot;%&#125;&quot;</span> &gt;</span><br><span class="line">      &lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span><br><span class="line">      &lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;submit&quot;</span>value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">      &#123;%csrf_token%&#125;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>— <code>&#123;% with %&#125;</code>:用更简单的变量名替代复杂的变量名</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">with</span> total=fhjsaldfhjsdfhlasdfhljsdal %&#125; &#123;&#123; total &#125;&#125; &#123;% endwith %&#125;</span><br></pre></td></tr></table></figure>
<p>— <code>&#123;% verbatim %&#125;</code>: 禁止render</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% verbatim %&#125;</span><br><span class="line">     &#123;&#123; hello &#125;&#125;</span><br><span class="line">&#123;% endverbatim %&#125;</span><br></pre></td></tr></table></figure>
<p>— <code>&#123;% load %&#125;</code>: 加载标签库 </p>
<p><strong>（3）自定义filter和simple_tag</strong></p>
<ul>
<li>a、在app中创建templatetags模块(必须的)</li>
<li>b、创建任意 .py 文件，如：my_tags.py</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> template</span><br><span class="line"><span class="keyword">from</span> django.utils.safestring <span class="keyword">import</span> mark_safe</span><br><span class="line"></span><br><span class="line">register = template.Library()   <span class="comment">#register的名字是固定的,不可改变</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@register.filter</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">filter_multi</span>(<span class="params">v1,v2</span>):</span><br><span class="line">    <span class="keyword">return</span>  v1 * v2</span><br><span class="line"></span><br><span class="line"><span class="meta">@register.simple_tag</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">simple_tag_multi</span>(<span class="params">v1,v2</span>):</span><br><span class="line">    <span class="keyword">return</span>  v1 * v2</span><br><span class="line"></span><br><span class="line"><span class="meta">@register.simple_tag</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_input</span>(<span class="params"><span class="built_in">id</span>,arg</span>):</span><br><span class="line">    result = <span class="string">&quot;&lt;input type=&#x27;text&#x27; id=&#x27;%s&#x27; class=&#x27;%s&#x27; /&gt;&quot;</span> %(<span class="built_in">id</span>,arg,)</span><br><span class="line">    <span class="keyword">return</span> mark_safe(result)</span><br></pre></td></tr></table></figure>

<ul>
<li>c、在使用自定义simple_tag和filter的html文件中导入之前创建的 my_tags.py ：<code>&#123;% load my_tags%&#125;</code></li>
<li>d、使用simple_tag和filter（如何调用）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------.html</span><br><span class="line">&#123;% load xxx %&#125;   <span class="comment">#首行</span></span><br><span class="line">      </span><br><span class="line"> <span class="comment"># num=12</span></span><br><span class="line">&#123;&#123; num|filter_multi:<span class="number">2</span> &#125;&#125; <span class="comment">#24</span></span><br><span class="line"></span><br><span class="line">&#123;&#123; num|filter_multi:<span class="string">&quot;[22,333,4444]&quot;</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;% simple_tag_multi <span class="number">2</span> <span class="number">5</span> %&#125;  参数不限,但不能放在<span class="keyword">if</span> <span class="keyword">for</span>语句中</span><br><span class="line">&#123;% simple_tag_multi num <span class="number">5</span> %&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>e、在settings中的INSTALLED_APPS配置当前app，不然django无法找到自定义的simple_tag。</li>
</ul>
<p><strong>注意：</strong><br>filter可以用在if等语句后，simple_tag不可以：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> num|filter_multi:<span class="number">30</span> &gt; <span class="number">100</span> %&#125;</span><br><span class="line">    &#123;&#123; num|filter_multi:<span class="number">30</span> &#125;&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p><strong>（4）extend模板继承</strong></p>
<p>— include 模板标签：</p>
<ul>
<li>在讲解了模板加载机制之后，我们再介绍一个利用该机制的内建模板标签： <code>&#123;% include %&#125;</code>。该标签允许在（模板中）包含其它的模板的内容。 标签的参数是所要包含的模板名称，可以是一个变量，也可以是用单&#x2F;双引号硬编码的字符串。</li>
<li>每当在多个模板中出现相同的代码时，就应该考虑是否要使用 <code>&#123;% include %&#125;</code> 来减少重复。include适合用于导入小组件，一个页面可以导入多个，<code>&#123;% include 'xxx.html' %&#125;</code></li>
</ul>
<p>— extend(继承)模板标签：</p>
<ul>
<li><p>到目前为止，我们的模板范例都只是些零星的 HTML 片段，但在实际应用中，你将用 Django 模板系统来创建整个 HTML 页面。这就带来一个常见的 Web 开发问题：在整个网站中，如何减少共用页面区域（比如站点导航）所引起的重复和冗余代码？解决该问题的传统做法是使用 服务器端的 includes，你可以在 HTML 页面中使用该指令将一个网页嵌入到另一个中。 事实上， Django 通过刚才讲述的 <code>&#123;% include %&#125;</code> 支持了这种方法。 但是用 Django 解决此类问题的首选方法是使用更加优雅的策略—— 模板继承。</p>
</li>
<li><p>本质上来说，模板继承就是先构造一个基础框架模板，而后在其子模板中对它所包含站点公用部分和定义块进行重载。一个子版只能有一个母版base.html，子版继承extend母版，母版适合用于整个页面继承，一个母版只能继承一次。</p>
</li>
</ul>
<p>解决大量重复代码这个问题的服务器端 include 方案是找出两个模板中的共同部分，将其保存为不同的模板片段，然后在每个模板中进行 include。 也许你会把模板头部的一些代码保存为 header.html 文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01//EN&quot;</span>&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br></pre></td></tr></table></figure>
<p>你可能会把底部保存到文件 footer.html :</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr&gt;</span><br><span class="line">    &lt;p&gt;Thanks <span class="keyword">for</span> visiting my site.&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>对基于 include 的策略，头部和底部的包含很简单。 麻烦的是中间部分。 例如，每个页面都有一个&lt;h1&gt;My helpful timestamp site&lt;&#x2F;h1&gt; 标题，但是这个标题不能放在header.html 中，因为每个页面的 &lt;title&gt; 是不同的。 如果我们将&lt;h1&gt; 包含在头部，我们就不得不包含 &lt;title&gt; ，但这样又不允许在每个页面对它进行定制。何去何从呢？</p>
<p>Django 的模板继承系统解决了这些问题。 你可以将其视为服务器端 include 的逆向思维版本。 你可以对那些不同 的代码段进行定义，而不是 共同 代码段。</p>
<p>第一步是定义 基础模板,该框架之后将由子模板所继承。 以下是我们目前所讲述范例的基础模板：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01//EN&quot;</span>&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;&#123;% block title %&#125;&#123;% endblock %&#125;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;My helpful timestamp site&lt;/h1&gt;</span><br><span class="line">    &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line">    &#123;% block footer %&#125;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;p&gt;Thanks <span class="keyword">for</span> visiting my site.&lt;/p&gt;</span><br><span class="line">    &#123;% endblock %&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>这个叫做 base.html 的模板定义了一个简单的 HTML 框架文档，我们将在本站点的所有页面中使用。 子模板的作用就是重载、添加或保留那些块的内容。</p>
<p>我们使用模板标签： <code>&#123;% block %&#125;</code> 。 所有的 <code>&#123;% block %&#125;</code> 标签告诉模板引擎，子模板可以重载这些部分。 每个<code>&#123;% block %&#125;</code>标签所要做的是告诉模板引擎，该模板下的这一块内容将有可能被子模板覆盖。</p>
<p>现在我们已经有了一个基本模板，我们可以修改 current_datetime.html 模板来 使用它：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends <span class="string">&quot;base.html&quot;</span> %&#125;</span><br><span class="line"> </span><br><span class="line">&#123;% block title %&#125;The current time&#123;% endblock %&#125;</span><br><span class="line"> </span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">&lt;p&gt;It <span class="keyword">is</span> now &#123;&#123; current_date &#125;&#125;.&lt;/p&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<p>再为 hours_ahead 视图创建一个模板，看起来是这样的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends <span class="string">&quot;base.html&quot;</span> %&#125;</span><br><span class="line"> </span><br><span class="line">&#123;% block title %&#125;Future time&#123;% endblock %&#125;</span><br><span class="line"> </span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">&lt;p&gt;In &#123;&#123; hour_offset &#125;&#125; hour(s), it will be &#123;&#123; next_time &#125;&#125;.&lt;/p&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<p>看起来很漂亮是不是？ 每个模板只包含对自己而言 独一无二 的代码。无需多余的部分。如果想进行站点级的设计修改，仅需修改 base.html ，所有其它模板会立即反映出所作修改。</p>
<p><strong>以下是其工作方式：</strong><br>在加载 current_datetime.html 模板时，模板引擎发现了 <code>&#123;% extends %&#125;</code> 标签， 注意到该模板是一个子模板。 模板引擎立即装载其父模板，即本例中的 base.html 。此时，模板引擎注意到 base.html 中的三个 <code>&#123;% block %&#125;</code> 标签，并用子模板的内容替换这些 block 。因此，引擎将会使用我们在 <code>&#123;% block title %&#125;</code> 中定义的标题，对 <code>&#123;% block content %&#125;</code> 也是如此。 所以，网页标题一块将由<code>&#123;% block title %&#125;</code>替换，同样地，网页的内容一块将由 <code>&#123;% block content %&#125;</code>替换。当前页面在渲染前会先把继承的母版和include找到，<strong>整合在一起后再渲染</strong>，所以include的页面里可以写类似 这样的特殊标记。</p>
<p>注意由于子模板并没有定义 footer 块，模板系统将使用在父模板中定义的值。 父模板 <code>&#123;% block %&#125;</code> 标签中的内容总是被当作一条退路。继承并不会影响到模板的上下文。 换句话说，任何处在继承树上的模板都可以访问到你传到模板中的每一个模板变量。你可以根据需要使用任意多的继承次数。 使用继承的一种常见方式是下面的三层法：</p>
<ol>
<li>创建 base.html 模板，在其中定义站点的主要外观感受。 这些都是不常修改甚至从不修改的部分。</li>
<li>为网站的每个区域创建 base_SECTION.html 模板(例如, base_photos.html 和 base_forum.html )。这些模板对base.html 进行拓展，并包含区域特定的风格与设计。</li>
<li>为每种类型的页面创建独立的模板，例如论坛页面或者图片库。 这些模板拓展相应的区域模板。</li>
</ol>
<p>这个方法可最大限度地重用代码，并使得向公共区域（如区域级的导航）添加内容成为一件轻松的工作。以下是使用模板继承的一些诀窍：</p>
<ol>
<li>如果在模板中使用 <code>&#123;% extends %&#125;</code> ，必须保证其为模板中的第一个模板标记。 否则，模板继承将不起作用。</li>
<li>一般来说，基础模板中的 <code>&#123;% block %&#125;</code> 标签越多越好。 记住，子模板不必定义父模板中所有的代码块，因此你可以用合理的缺省值对一些代码块进行填充，然后只对子模板所需的代码块进行（重）定义。 俗话说，钩子越多越好。</li>
<li>如果发觉自己在多个模板之间拷贝代码，你应该考虑将该代码段放置到父模板的某个 <code>&#123;% block %&#125;</code> 中。如果你需要访问父模板中的块的内容，使用 这个标签吧，这一个魔法变量将会表现出父模板中的内容。 如果只想在上级代码块基础上添加内容，而不是全部重载，该变量就显得非常有用了。</li>
<li>不允许在同一个模板中定义多个同名的 <code>&#123;% block %&#125;</code> 。 存在这样的限制是因为block 标签的工作方式是双向的。也就是说，block 标签不仅挖了一个要填的坑，也定义了在父模板中这个坑所填充的内容。如果模板中出现了两个相同名称的 <code>&#123;% block %&#125;</code> 标签，父模板将无从得知要使用哪个块的内容。</li>
</ol>
<h3 id="5-模型"><a href="#5-模型" class="headerlink" title="5. 模型"></a>5. 模型</h3><p>Django的models主要用于去数据库里取数据，然后将数据返回给视图。在Django中是基于ORM实现的，ORM用于实现面向对象编程语言里不同类型系统的数据之间的转换，换言之，就是用面向对象的方式去操作数据库的创建表以及增删改查等操作。</p>
<p>关于Django的models见：python开发之Django（二）</p>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>参考文献：<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yuanchenqi/articles/6083427.html">https://www.cnblogs.com/yuanchenqi/articles/6083427.html</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wupeiqi/articles/5237704.html">https://www.cnblogs.com/wupeiqi/articles/5237704.html</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="http://example.com">JoeXu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://blog.csdn.net/Dr_BigJoe/article/details/104825489">https://blog.csdn.net/Dr_BigJoe/article/details/104825489</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">以上为个人学习笔记总结，供学习参考交流，转载请注明出处。</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/python/">python</a></div><div class="post_share"><div class="social-share" data-image="https://avatars.githubusercontent.com/u/67886383?s=400&amp;u=99fc4b7b2788d8823a12f2924f7942669b39b105&amp;v=4" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/04/18/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20Django%EF%BC%88%E4%BA%8C%EF%BC%89/" title="【python开发】— Django（二）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">【python开发】— Django（二）</div></div></a></div><div class="next-post pull-right"><a href="/2020/04/15/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" title="【python开发】— 内存分配与垃圾回收"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">【python开发】— 内存分配与垃圾回收</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2020/04/20/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20Django%EF%BC%88%E4%B8%89%EF%BC%89/" title="【python开发】— Django（三）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-20</div><div class="title">【python开发】— Django（三）</div></div></a></div><div><a href="/2020/04/18/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20Django%EF%BC%88%E4%BA%8C%EF%BC%89/" title="【python开发】— Django（二）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-18</div><div class="title">【python开发】— Django（二）</div></div></a></div><div><a href="/2020/03/07/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20Game-of-Life-%E7%94%9F%E5%91%BD%E6%B8%B8%E6%88%8F/" title="【python开发】— Game of Life 生命游戏"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-07</div><div class="title">【python开发】— Game of Life 生命游戏</div></div></a></div><div><a href="/2020/03/20/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20MySQL%EF%BC%88%E4%B8%80%EF%BC%89/" title="【python开发】— MySQL（一）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-20</div><div class="title">【python开发】— MySQL（一）</div></div></a></div><div><a href="/2020/03/20/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20MySQL%EF%BC%88%E4%B8%89%EF%BC%89/" title="【python开发】— MySQL（三）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-20</div><div class="title">【python开发】— MySQL（三）</div></div></a></div><div><a href="/2020/03/20/%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94%20MySQL%EF%BC%88%E4%BA%8C%EF%BC%89/" title="【python开发】— MySQL（二）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-20</div><div class="title">【python开发】— MySQL（二）</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://avatars.githubusercontent.com/u/67886383?s=400&amp;u=99fc4b7b2788d8823a12f2924f7942669b39b105&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Joe Xu</div><div class="author-info__description">Stay hungry, Stay Foolish</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/JoeXu727" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%80%90python%E5%BC%80%E5%8F%91%E3%80%91%E2%80%94-Django%EF%BC%88%E4%B8%80%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">【python开发】— Django（一）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81web%E6%A1%86%E6%9E%B6"><span class="toc-number">2.</span> <span class="toc-text">一、web框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-web%E6%A1%86%E6%9E%B6%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">2.0.1.</span> <span class="toc-text">1. web框架的本质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-web%E6%A1%86%E6%9E%B6%E5%9F%BA%E7%A1%80"><span class="toc-number">2.0.2.</span> <span class="toc-text">2. web框架基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-MVC%E5%92%8CMTV%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.0.3.</span> <span class="toc-text">3. MVC和MTV模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Django"><span class="toc-number">3.</span> <span class="toc-text">二、Django</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">3.0.1.</span> <span class="toc-text">1. 基本配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BAdjango%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.0.1.1.</span> <span class="toc-text">（1）创建django程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%A8%8B%E5%BA%8F%E7%9B%AE%E5%BD%95"><span class="toc-number">3.0.1.2.</span> <span class="toc-text">（2）程序目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.0.1.3.</span> <span class="toc-text">（3）配置文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%B7%AF%E7%94%B1%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.0.2.</span> <span class="toc-text">2. 路由系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0"><span class="toc-number">3.0.3.</span> <span class="toc-text">3. 视图函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%A8%A1%E6%9D%BF"><span class="toc-number">3.0.4.</span> <span class="toc-text">4. 模板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.0.5.</span> <span class="toc-text">5. 模型</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/10/%E3%80%90%E9%98%BF%E9%87%8C%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%BC%95%E6%93%8E%E5%AE%9E%E6%88%98%E3%80%91%E2%80%94%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6-%E5%A4%9A%E9%A1%B5%E9%9D%A2%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%80%EF%BC%89/" title="【阿里低代码引擎实战】— 自定义插件-多页面管理（一）">【阿里低代码引擎实战】— 自定义插件-多页面管理（一）</a><time datetime="2024-03-10T08:23:30.000Z" title="Created 2024-03-10 16:23:30">2024-03-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/03/%E3%80%90%E8%B8%A9%E5%9D%91%E4%B9%8B%E8%B7%AF%E3%80%91%E2%80%94%20%E8%A7%A3%E5%86%B3GitHub%20push%E4%BB%A3%E7%A0%81%E6%8A%A5%E9%94%99403/" title="【踩坑之路】— 解决GitHub push代码报错403">【踩坑之路】— 解决GitHub push代码报错403</a><time datetime="2024-03-03T12:24:30.000Z" title="Created 2024-03-03 20:24:30">2024-03-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/02/%E3%80%90%E9%98%BF%E9%87%8C%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%BC%95%E6%93%8E%E5%AE%9E%E6%88%98%E3%80%91%E2%80%94%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%89%A9%E6%96%99%E6%8E%A5%E5%85%A5demo(%E5%86%85%E5%90%ABnpm%E5%8F%91%E5%8C%85%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4)/" title="【阿里低代码引擎实战】— 自定义物料接入demo(内含npm发包详细步骤)">【阿里低代码引擎实战】— 自定义物料接入demo(内含npm发包详细步骤)</a><time datetime="2024-03-02T03:03:30.000Z" title="Created 2024-03-02 11:03:30">2024-03-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/24/%E3%80%90%E9%98%BF%E9%87%8C%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%BC%95%E6%93%8E%E5%AE%9E%E6%88%98%E3%80%91%E2%80%94%20%E5%AE%89%E8%A3%85WSL%E4%B8%8E%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE/" title="【阿里低代码引擎实战】— 安装WSL与初始化项目">【阿里低代码引擎实战】— 安装WSL与初始化项目</a><time datetime="2024-02-24T02:35:02.000Z" title="Created 2024-02-24 10:35:02">2024-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/12/24/%E3%80%90%E5%89%8D%E7%AB%AF%E8%8F%9C%E9%B8%A1%E8%B8%A9%E5%9D%91%E4%B9%8B%E8%B7%AF%E3%80%91%E2%80%94%20Vue3%20getCurrentInstance%E8%8E%B7%E5%8F%96%E5%88%B0%E7%9A%84%E8%8A%82%E7%82%B9%E4%B8%BAtext/" title="【前端菜鸡踩坑之路】— Vue3 getCurrentInstance获取到的节点为text">【前端菜鸡踩坑之路】— Vue3 getCurrentInstance获取到的节点为text</a><time datetime="2023-12-24T03:47:18.000Z" title="Created 2023-12-24 11:47:18">2023-12-24</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Joe Xu</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>